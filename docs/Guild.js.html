<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Guild.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Channel.html">Channel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Channel.html#delete">delete</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ClientUser.html">ClientUser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ClientUser.html#createDM">createDM</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ClientUser.html#send">send</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ClientUser.html#setActivity">setActivity</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ClientUser.html#setStatus">setStatus</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ClientUser.html#setUsername">setUsername</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Guild.html">Guild</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#ban">ban</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#createChannel">createChannel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#edit">edit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#fetchBans">fetchBans</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#fetchInvites">fetchInvites</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#fetchMember">fetchMember</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#fetchMembers">fetchMembers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#fetchVoiceRegions">fetchVoiceRegions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#kick">kick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#leave">leave</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#prune">prune</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#softban">softban</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Guild.html#unban">unban</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="GuildChannel.html">GuildChannel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="GuildChannel.html#createInvite">createInvite</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="GuildChannel.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="GuildChannel.html#edit">edit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="GuildChannel.html#fetchInvites">fetchInvites</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="GuildChannel.html#overwritePermissions">overwritePermissions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="GuildChannel.html#setName">setName</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Message.html">Message</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Message.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Message.html#edit">edit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Message.html#pin">pin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Message.html#reply">reply</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Message.html#unpin">unpin</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="MessageEmbed.html">MessageEmbed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MessageEmbed.html#addField">addField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MessageEmbed.html#setAuthor">setAuthor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MessageEmbed.html#setColor">setColor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MessageEmbed.html#setDescription">setDescription</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MessageEmbed.html#setFooter">setFooter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MessageEmbed.html#setImage">setImage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MessageEmbed.html#setThumbnail">setThumbnail</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MessageEmbed.html#setTimestamp">setTimestamp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MessageEmbed.html#setTitle">setTitle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MessageEmbed.html#setUrl">setUrl</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="TextChannel.html">TextChannel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#createInvite">createInvite</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#createWebhook">createWebhook</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#edit">edit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#fetchInvites">fetchInvites</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#fetchMessage">fetchMessage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#fetchMessages">fetchMessages</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#fetchPinnedMessages">fetchPinnedMessages</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#overwritePermissions">overwritePermissions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#pin">pin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#send">send</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#setName">setName</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextChannel.html#unpin">unpin</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="UnavailableGuild.html">UnavailableGuild</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="User.html">User</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="User.html#createDM">createDM</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="User.html#send">send</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">Guild.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const Collection = require('../Util/Collection');
const ENDPOINTS = require('../Rest/Endpoints');
const TextChannel = require('./TextChannel');
const GuildChannel = require('./GuildChannel');
const User = require('./User');

/**
 * @class Represents a Guild
 */

class Guild
{
    constructor(client, data)
    {
        Object.defineProperty(this, '_client', { value: client });

        /**
         * The Guild name
         */

        this.name = data.name;

        /**
         * The Guild Icon
         */

        this.icon = data.icon || null;

        /**
         * The guild splash
         */

        this.splash = data.splash || null;

        /**
         * Guild owner ( User Object )
         */

        this.owner = this._client.users.get(data.owner_id);

        /**
         * The Guild region
         */

        this.region = data.region;

        /**
         * The Guild AFK Timeout
         */
        this.afkTimeout = data.afk_timeout;

        /**
         * Guild verification level
         */

        this.verificationLevel = data.verification_level;

        /**
         * Guild message notification level
         */

        this.messageNotifications = data.default_message_notifications;

        /**
         * Whether the guild is large or not
         */

        this.large = data.large;
        this.lazy = data.lazy;

        /**
         * Guild explicit content filter
         */

        this.explicitContentFilter = data.explicit_content_filter;

        /**
         * Guild MFA Level
         */

        this.mfaLevel = data.mfa_level;

        /**
         * Whether the guild is available or not
         */

        this.available = !data.unavailable;

        /**
         * The Guild Member Count
         */

        this.memberCount = data.member_count;

        /**
         * The time the client user joined the guild
         */

        this.joinedAt = Date.parse(data.joined_at);

        /**
         * An array of guild Features
         */

        this.features = data.features;

        /**
         * The Guild ID
         */

        this.id = data.id;

        /* Collections */

        /**
         * A Collection of Guild Channels
         */

        this.channels = new Collection();

        /**
         * A Collection of Guild Members
         */

        this.members = new Collection();

        data.channels.forEach(channel =>
        {
            if (channel.type === 0)
            {
                this._client.channels.set(channel.id, new TextChannel(this._client, channel, data));
                this.channels.set(channel.id, new TextChannel(this._client, channel, data));
            }
            else {
                this.channels.set(channel.id, new GuildChannel(this._client, channel, data));
                this._client.channels.set(channel.id, new GuildChannel(this._client, channel, data));
            }
        });

        data.members.forEach(member =>
        {
            member.guild = this;
            this.members.set(member.user.id, member);
            this._client.users.set(member.user.id, new User(this._client, member.user));
        });
    }

    /**
     * Bans a guild member
     * @param {String} user The user ID of the member to ban
     * @param {Object} options Ban options
     * @returns {Promise&lt;User>}
     */

    ban(user, options = {})
    {
        return this._client.rest.request("PUT", `${ENDPOINTS.GUILD_BAN(this.id, user)}?delete-message-days=${options.days}&amp;reason=${options.reason}`,
        {
            headers:
            {
                Authorization: `Bot ${this._client.token}`
            }
        }).then(() =>
        {
            return this.members.get(user);
        });
    }

    /**
     * Modify this guild.
     * @param {GuildUpdateData} [data] Guild update options/data
     * @returns {Promise&lt;Guild>}
     */
    edit(data = {})
    {
        let resolvedData = {};

        if (data.name) resolvedData.name = data.name;

        if (data.region) resolvedData.region = data.region;

        if (typeof data.verificationLevel !== 'undefined') resolvedData.verification_level = Number(data.verificationLevel);
        
        if (typeof data.afkChannelId !== 'undefined') resolvedData.afk_channel_id = data.afkChannelId;
        
        if (typeof data.systemChannelId !== 'undefined') resolvedData.system_channel_id = data.systemChannel;
        
        if (data.afkTimeout) resolvedData.afk_timeout = Number(data.afkTimeout);
        
        if (typeof data.icon !== 'undefined') resolvedData.icon = data.icon;
        
        if (data.ownerId) resolvedData.owner_id = data.ownerId;
        
        if (data.splash) resolvedData.splash = data.splash;
        
        if (typeof data.explicitContentFilter !== 'undefined') resolvedData.explicit_content_filter = Number(data.explicitContentFilter);

        return this._client.rest.request('PATCH', ENDPOINTS.GUILDS(this.id),
        {
            data: resolvedData,
            headers:
            {
                Authorization: `Bot ${this._client.token}`
            }
        }).then(() =>
        {
            return this;
        });
    }

    /**
     * Creates a channel
     * @param {Object} options Options for creating a channel
     * @param {String} options.name The name of the Channel
     * @param {String} options.type The type of the Channel
     * @param {Array} options.overwrites An array of Permission Overwrites
     * @returns {Promise&lt;GuildChannel>}
     */

    createChannel(options = {})
    {
        if (options.type === 'text') options.type === 0;
        if (options.type === 'voice') options.type === 2;
        if (options.type === 'category') options.type === 4;

        return this._client.rest.request("POST", ENDPOINTS.GUILD_CHANNELS(this.id),
        {
            data:
            {
                name: options.name,
                type: options.type,
                permission_overwrites: options.overwrites
            }
        })
    }

    /**
     * Fetches the guild bans of the guild
     * @returns {Promise&lt;Array&lt;Bans>>}
     */

    fetchBans()
    {
        return this._client.rest.request("GET", ENDPOINTS.GUILD_BANS(this.id),
        {
            headers:
            {
                Authorization: `Bot ${this._client.token}`
            }
        }).then(res =>
        {
            return res.data;
        });
    }

    /**
     * Fetches invites on the Guild
     * @returns {Promise&lt;Array&lt;Invites>>}
     */

    fetchInvites()
    {
        return this._client.rest.request("GET", ENDPOINTS.GUILD_INVITES(this.id),
        {
            headers:
            {
                Authorization: `Bot ${this._client.token}`
            }
        }).then(res =>
        {
            return res.data;
        });
    }

    /**
     * Fetches a member inside the guild
     * @param {String} user The ID of the Member to get
     * @returns {Promise&lt;Member>}
     */

    fetchMember(user)
    {
        return this._client.rest.request("GET", ENDPOINTS.GUILD_MEMBER(this.id, user),
        {
            headers:
            {
                Authorization: `Bot ${this._client.token}`
            }
        }).then(res =>
        {
            return res.data;
        });
    }

    /**
     * Fetches Guild Members
     * @param {Object} options The options for fetching the Guild Members
     * @param {Number} [options.limit=1] The limit of members to fetch
     * @param {String} [options.after=null] The highest user id in the previous page
     * @returns {Promise&lt;Array&lt;Members>>}	
     */

    fetchMembers(options = {})
    {
        return this._client.rest.request("GET", `${ENDPOINTS.GUILD_MEMBERS(this.id)}?limit=${options.limit || 1}&amp;after=${options.after || null}`,
        {
            headers:
            {
                Authorization: `Bot ${this._client.token}`
            }
        }).then(res =>
        {
            return res.data;
        });
    }

    /**
     * Fetch available voice regions.
     * @returns {Promise&lt;Array&lt;VoiceRegions>>}
     */

    fetchVoiceRegions()
    {
        return this._client.rest.request("GET", ENDPOINTS.GUILD_REGIONS(this.id),
        {
            headers:
            {
                Authorization: `Bot ${this._client.token}`
            }
        }).then(res =>
        {
            return res.data;
        });
    }

    /**
     * Kicks a User
     * @param {String} user The id of the User to Kick
     * @returns {Promise&lt;Member>}
     */

    kick(user)
    {
        return this._client.rest.request("DELETE", ENDPOINTS.GUILD_MEMBER(this.id, user),
        {
            headers:
            {
                Authorization: `Bot ${this._client.token}`
            }
        }).then(() =>
        {
            return this.members.get(user);
        });
    }

    /**
     * Makes the client leave the guild
     * @returns {Promise&lt;Guild>}
     */

    leave()
    {
        return this._client.rest.request("DELETE", ENDPOINTS.USER_GUILD(this.id),
        {
            headers:
            {
                Authorization: `Bot ${this._client.token}`
            }
        }).then(() =>
        {
            return this;
        });
    }
    
    /**
     * Begin a prune operation
     * @param {Number} [days=1] Number of days to prune
     * @returns {Promise&lt;Number>}
     */

    prune(days = 1)
    {
        return this._client.rest.request("POST", `${ENDPOINTS.GUILD_PRUNE(this.id)}?days=${days}`,
        {
            headers:
            {
                Authorization: `Bot ${this._client.token}`
            }
        }).then(res =>
        {
            return res.data.pruned;
        });
    }

    /**
     * Softbans a user
     * @param {String} user The ID of the User to softban
     * @returns {Promise&lt;Member>}
     */

    async softban(user)
    {
        this.ban(user, { days: 7 });
        this.unban(user);

        return this.members.get(user);
    }

    /**
     * Unbans a member
     * @param {String} user The UserID to unban
     * @returns {Promise&lt;Member>}
     */

    unban(user)
    {
        return this._client.rest.request("DELETE", ENDPOINTS.GUILD_BAN(this.id, user),
        {
            headers:
            {
                Authorization: `Bot ${this._client.token}`
            }
        }).then(() =>
        {
            return this.members.get(user);
        });
    }
};

module.exports = Guild;</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Nov 24 2018 17:47:43 GMT+0800 (Singapore Standard Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
